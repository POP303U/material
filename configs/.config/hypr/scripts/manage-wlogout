#!/usr/bin/env sh

# Check if wlogout is already running
if pgrep -x "wlogout" >/dev/null; then
    pkill -x "wlogout"
    exit 0
fi

# AUTO GENERATED BY ´wofi-manager´ DO NOT EDIT
SHOW_KEYBINDS="$( [[ $(awk '/wlogout-keybinds-show/ {print $NF}' $HOME/.config/material/config) == "off" ]] && echo " " || echo "-s" )"
STYLE="$(awk '/wlogout-theme/ {print $NF}' $HOME/.config/material/config)"
### END

# Add support for passing in arguments
STYLE="${1:-$STYLE}"

case $STYLE in 
    # ensure compatibility with old versions by using or statements
    compact|Compact)
        wlogout \
            $SHOW_KEYBINDS \
            -b 2                                                   \
            -L 500                                                 \
            -R 500                                                 \
            --css      "$HOME/.config/wlogout/logout/$STYLE/style_compact.css"   \
            --layout   "$HOME/.config/wlogout/logout/$STYLE/layout_compact.json" \
            --protocol layer-shell
        ;;
    normal|Normal)
        wlogout \
            $SHOW_KEYBINDS \
            --css      "$HOME/.config/wlogout/logout/$STYLE/style_normal.css"   \
            --layout   "$HOME/.config/wlogout/logout/$STYLE/layout_normal.json" \
            --protocol layer-shell
        ;;
    blocks|Blocks)
        wlogout \
            $SHOW_KEYBINDS \
            -b 2                                                   \
            -L 500                                                 \
            -R 500                                                 \
            --css      "$HOME/.config/wlogout/logout/$STYLE/style_blocks.css"   \
            --layout   "$HOME/.config/wlogout/logout/$STYLE/layout_blocks.json" \
            --protocol layer-shell
        ;;
    *)
        echo "no valid style named: $STYLE found"
        ;;
esac
